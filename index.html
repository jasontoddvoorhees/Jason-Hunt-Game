<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jason's Hunt - Camp Crystal Lake</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: linear-gradient(180deg, #0d1b0d 0%, #000000 100%);
    font-family: 'Courier New', monospace;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 20px;
  }
  .game-container {
    text-align: center;
    max-width: 95vw;
    width: 100%;
    overflow: hidden;
  }
  .title {
    font-size: 2.2em;
    color: #ff0000;
    text-shadow: 3px 3px 10px #000, 0 0 20px #ff0000;
    margin-bottom: 10px;
    letter-spacing: 3px;
  }
  .subtitle {
    font-size: 1.1em;
    color: #cc0000;
    margin-bottom: 15px;
  }
  .stats {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 1.1em;
  }
  .stat {
    background: rgba(0,0,0,0.7);
    padding: 8px 15px;
    border: 2px solid #660000;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(255,0,0,0.4);
  }
  .stat-label { color: #999; font-size: 0.8em; }
  .stat-value { color: #ff0000; font-weight: bold; font-size: 1.3em; }
  canvas {
    border: 4px solid #330000;
    background: #1a2d1a;
    box-shadow: 0 0 30px rgba(255,0,0,0.5);
    display: block;
    margin: 0 auto;
    width: 100%;
    max-width: 600px;
    aspect-ratio: 1 / 1;
  }
  .controls {
    margin-top: 15px;
    color: #999;
    font-size: 0.9em;
  }
  button {
    background: #660000;
    color: #fff;
    border: 2px solid #ff0000;
    padding: 10px 25px;
    font-size: 1em;
    font-family: 'Courier New', monospace;
    cursor: pointer;
    margin-top: 15px;
    border-radius: 5px;
    box-shadow: 0 0 15px rgba(255,0,0,0.5);
    transition: all 0.3s;
  }
  button:hover {
    background: #ff0000;
    box-shadow: 0 0 25px rgba(255,0,0,0.8);
    transform: scale(1.05);
  }
  .game-over {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.95);
    padding: 30px;
    border: 3px solid #ff0000;
    border-radius: 10px;
    text-align: center;
    display: none;
    z-index: 1000;
    box-shadow: 0 0 40px rgba(255,0,0,0.8);
    width: 90%;
    max-width: 400px;
  }
  .game-over.show { display: block; }
  @media (max-width: 480px) {
    .title { font-size: 1.8em; }
    canvas { max-width: 90vw; }
  }
</style>
</head>
<body>
<div class="game-container">
  <div class="title">ðŸ”ª JASON'S HUNT ðŸ”ª</div>
  <div class="subtitle">Camp Crystal Lake</div>
  
  <div class="stats">
    <div class="stat">
      <div class="stat-label">BODY COUNT</div>
      <div class="stat-value" id="score">0</div>
    </div>
    <div class="stat">
      <div class="stat-label">HIGH SCORE</div>
      <div class="stat-value" id="highscore">0</div>
    </div>
  </div>

  <canvas id="gameCanvas" width="600" height="600"></canvas>

  <div class="controls">
    <p>Use Arrow Keys or WASD to move Jason</p>
    <p class="instructions">Catch counselors to increase your body count. Donâ€™t run into yourself or obstacles!</p>
    <button id="startBtn">START HUNT</button>
  </div>
</div>

<div class="game-over" id="gameOver">
  <h2>GAME OVER</h2>
  <p>Final Body Count: <span id="finalScore"></span></p>
  <p id="newRecord" style="color: #ff0000; display: none;">ðŸ”ª NEW RECORD! ðŸ”ª</p>
  <button id="restartBtn">HUNT AGAIN</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const gridSize = 20;
const tileCount = canvas.width / gridSize;

let snake = [{x: 10, y: 10}];
let velocityX = 0;
let velocityY = 0;
let counselor = {x: 15, y: 15};
let score = 0;
let highScore = localStorage.getItem('jasonHighScore') || 0;
let gameRunning = false;
let gameSpeed = 120;
let obstacles = [];

document.getElementById('highscore').textContent = highScore;

function generateObstacles() {
  obstacles = [];
  for(let i = 2; i < 5; i++) {
    for(let j = 2; j < 5; j++) obstacles.push({x: i, y: j, type: 'cabin'});
  }
  for(let i = 25; i < 28; i++) {
    for(let j = 2; j < 5; j++) obstacles.push({x: i, y: j, type: 'cabin'});
  }
  for(let i = 12; i < 18; i++) {
    for(let j = 12; j < 18; j++) obstacles.push({x: i, y: j, type: 'lake'});
  }
  const trees = [
    {x: 8, y: 8}, {x: 22, y: 22}, {x: 5, y: 25},
    {x: 25, y: 8}, {x: 8, y: 22}, {x: 20, y: 10}
  ];
  trees.forEach(pos => obstacles.push({...pos, type: 'tree'}));
}

function drawGame() {
  ctx.fillStyle = '#1a2d1a';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.strokeStyle = '#0d1b0d';

  for(let i = 0; i < tileCount; i++) {
    ctx.beginPath();
    ctx.moveTo(i * gridSize, 0);
    ctx.lineTo(i * gridSize, canvas.height);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0, i * gridSize);
    ctx.lineTo(canvas.width, i * gridSize);
    ctx.stroke();
  }

  obstacles.forEach(obs => {
    if(obs.type === 'cabin') ctx.fillStyle = '#4d2600';
    else if(obs.type === 'lake') ctx.fillStyle = '#0d3d5c';
    else if(obs.type === 'tree') ctx.fillStyle = '#1a4d1a';
    ctx.fillRect(obs.x * gridSize, obs.y * gridSize, gridSize, gridSize);
  });

  ctx.fillStyle = '#ffcc00';
  ctx.fillRect(counselor.x * gridSize + 2, counselor.y * gridSize + 2, gridSize - 4, gridSize - 4);

  snake.forEach((seg, index) => {
    if(index === 0) {
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(seg.x * gridSize, seg.y * gridSize, gridSize, gridSize);
      ctx.fillStyle = '#000';
      ctx.fillRect(seg.x * gridSize + 4, seg.y * gridSize + 6, 4, 4);
      ctx.fillRect(seg.x * gridSize + 12, seg.y * gridSize + 6, 4, 4);
      ctx.fillStyle = '#ff0000';
      ctx.fillRect(seg.x * gridSize + 2, seg.y * gridSize + 2, 2, 16);
    } else {
      ctx.fillStyle = index % 2 === 0 ? '#660000' : '#4d0000';
      ctx.fillRect(seg.x * gridSize + 1, seg.y * gridSize + 1, gridSize - 2, gridSize - 2);
    }
  });
}

function moveSnake() {
  const head = {x: snake[0].x + velocityX, y: snake[0].y + velocityY};
  if(head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) return endGame();
  if(snake.some(s => s.x === head.x && s.y === head.y)) return endGame();
  if(obstacles.some(o => o.x === head.x && o.y === head.y)) return endGame();
  snake.unshift(head);

  if(head.x === counselor.x && head.y === counselor.y) {
    score++;
    document.getElementById('score').textContent = score;
    placeCounselor();
    if(score % 5 === 0) gameSpeed = Math.max(50, gameSpeed - 10);
  } else {
    snake.pop();
  }
}

function placeCounselor() {
  let valid = false;
  while(!valid) {
    counselor.x = Math.floor(Math.random() * tileCount);
    counselor.y = Math.floor(Math.random() * tileCount);
    valid = !snake.some(s => s.x === counselor.x && s.y === counselor.y)
      && !obstacles.some(o => o.x === counselor.x && o.y === counselor.y);
  }
}

function endGame() {
  gameRunning = false;
  document.getElementById('finalScore').textContent = score;
  if(score > highScore) {
    highScore = score;
    localStorage.setItem('jasonHighScore', highScore);
    document.getElementById('highscore').textContent = highScore;
    document.getElementById('newRecord').style.display = 'block';
  } else {
    document.getElementById('newRecord').style.display = 'none';
  }
  document.getElementById('gameOver').classList.add('show');
}

function resetGame() {
  snake = [{x: 10, y: 10}];
  velocityX = 1;   // FIX: Set movement to start automatically
  velocityY = 0;
  score = 0;
  gameSpeed = 120;
  document.getElementById('score').textContent = score;
  generateObstacles();
  placeCounselor();
  document.getElementById('gameOver').classList.remove('show');
}

function startGame() {
  if(gameRunning) return;
  resetGame();
  gameRunning = true;
  gameLoop();
}

function gameLoop() {
  if(!gameRunning) return;
  moveSnake();
  drawGame();
  setTimeout(() => requestAnimationFrame(gameLoop), gameSpeed);
}

document.addEventListener('keydown', (e) => {
  if(!gameRunning) return;
  const k = e.key.toLowerCase();
  if((k === 'arrowup' || k === 'w') && velocityY === 0) { velocityX = 0; velocityY = -1; }
  else if((k === 'arrowdown' || k === 's') && velocityY === 0) { velocityX = 0; velocityY = 1; }
  else if((k === 'arrowleft' || k === 'a') && velocityX === 0) { velocityX = -1; velocityY = 0; }
  else if((k === 'arrowright' || k === 'd') && velocityX === 0) { velocityX = 1; velocityY = 0; }
});

document.getElementById('startBtn').addEventListener('click', startGame);
document.getElementById('restartBtn').addEventListener('click', startGame);

generateObstacles();
drawGame();
</script>
</body>
</html>
